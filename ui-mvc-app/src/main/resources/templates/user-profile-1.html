<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–ü–†–û–§–ò–õ–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü¶∑</text></svg>">
    <link rel="stylesheet" th:href="@{/css/style.css}" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>

<!-- –ú–µ–Ω—é -->
<div th:replace="fragments/nav :: main-menu"></div>

<section>

    <!-- –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div class="work">
        <label style="font-size: 80%;">–∏–º—è:</label><br>
        <label style="font-size: 120%;" id="name-label" th:text="${user.name}">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</label>

        <form id="name-form" th:action="@{/main/user/update-name}" method="post" style="display: none;">
            <input type="text" name="name" th:value="${user.name}" required />
            <input type="submit" value="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" class="small-button"/>
            <button type="button" onclick="hideForm('name-label', 'name-form')">‚ùå</button>
        </form>
    </div>

    <!-- Email -->
    <div class="work">
        <label style="font-size: 80%;">email:</label><br>
        <span style="font-size: 110%;" th:text="${user.login}">example@email.com</span><br>...<br>
        <form method="post" th:action="@{/main/user/change-email}"
              onsubmit="return confirm('–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —Å–º–µ–Ω–∏—Ç—å email?')">
            <button type="submit" class="small-button">–°–º–µ–Ω–∏—Ç—å email</button>
        </form>
    </div>

    <!-- –ü–∞—Ä–æ–ª—å -->
    <div class="work">
        <form method="post" th:action="@{/main/user/request-password-change}"
              onsubmit="return confirm('–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —Å–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å?')">
            <button type="submit" class="small-button">–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
        </form>
    </div>

    <!-- –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div class="work">
        <label style="font-size: 80%;">–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω:</label><br>
        <span style="font-size: 110%;" th:text="${#temporals.format(user.createdAt, 'dd-MM-yyyy')}">01-01-2024</span>
    </div>

    <!-- –£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç -->
    <div class="work">
        <form th:action="@{/main/user/delete}" method="post" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç?')">
            <button type="submit" class="medium-button">–£–î–ê–õ–ò–¢–¨ –ê–ö–ö–ê–£–ù–¢</button>
        </form>
    </div>
</section>

<script>
    function hideForm(labelId, formId) {
      document.getElementById(labelId).style.display = 'block';
      document.getElementById(formId).style.display = 'none';
    }

    function setupToggle(labelId, formId) {
      const label = document.getElementById(labelId);
      const form = document.getElementById(formId);
      if (label && form) {
        label.addEventListener('click', () => {
          label.style.display = 'none';
          form.style.display = 'block';
        });
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      setupToggle('name-label', 'name-form');
    });
</script>
</body>
</html>
