<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DENTAL LAB SERVICE</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü¶∑</text></svg>">
    <link rel="stylesheet" th:href="@{/css/style.css}" />
</head>
<body>

<div th:replace="fragments/nav :: main-menu"></div>

<section>
    <h2>–§–æ—Ç–æ –∑–∞–ø–∏—Å–∏</h2>
    <div th:text="${clinic} + ' : ' + ${patient}"> </div>

    <!-- üîΩ –ì–∞–ª–µ—Ä–µ—è -->
    <div class="photo-gallery">
        <div th:each="photo : ${photoEntries}" class="photo-box">
            <img th:src="${photo.photoLink}"
                 onclick="openPhotoModal(this.src)"
                 style="cursor: pointer;">
            <form th:action="@{'/main/dental-works/' + ${workId} + '/photo/delete'}" method="post">
                <input type="hidden" name="photo-file" th:value="${photo.filename}" />
                <button type="submit" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ —Ñ–æ—Ç–æ?')">—É–¥–∞–ª–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <!-- üîº –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ -->
    <h3>–î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ</h3>
    <form method="post"
          enctype="multipart/form-data"
          th:action="@{'/main/dental-works/' + ${workId} + '/photo/upload'}" name="–≤—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ">
        <input type="hidden" name="id" th:value="${workId}" />
        <input type="file" name="file" accept="image/*" required />
        <button type="submit">–∑–∞–≥—Ä—É–∑–∏—Ç—å</button>
    </form>
</section>
<!-- üñºÔ∏è –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–æ—Ç–æ -->
<div id="photo-modal" class="photo-modal" onclick="closePhotoModal()">
    <span class="photo-close">&times;</span>
    <img id="photo-modal-img" class="photo-modal-content">
</div>
<script>
    function openPhotoModal(src) {
        const modal = document.getElementById("photo-modal");
        const img = document.getElementById("photo-modal-img");
        img.src = src;
        modal.style.display = "block";
    }

    function closePhotoModal() {
        document.getElementById("photo-modal").style.display = "none";
    }
</script>
</body>
</html>
