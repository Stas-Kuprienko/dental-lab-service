<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DENTAL LAB SERVICE</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü¶∑</text></svg>">
    <link rel="stylesheet" th:href="@{/css/style.css}" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>

<!-- üîù –ú–µ–Ω—é -->
<div th:replace="fragments/nav :: nav"></div>

<section>

    <h2 style="text-align:center;">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–ø–∏—Å–µ–π</h2>

    <h3><strong th:text="${headerMonth.value()}">–ò—é–ª—å - 2025</strong></h3>

    <!-- üü¶ –õ–µ–≥–µ–Ω–¥–∞ -->
    <h4 style="float: left;">
        <label style="background-color: #002d73; border: 5px solid #002d73">–í–´–ü–û–õ–ù–ï–ù–û</label> &emsp;
        <label style="background-color: #075700; border: 5px solid #075700">–û–ü–õ–ê–ß–ï–ù–û</label>
    </h4>

    <form id="bulk-form" th:action="@{/main/dental-works/bulk-update}" method="post">

        <!-- —Å–æ—Ö—Ä–∞–Ω—è–µ–º –º–µ—Å—è—Ü -->
        <input type="hidden" name="year-month" th:value="${headerMonth.year + '-' + headerMonth.monthValue}">

        <div style="overflow-x:auto;">
            <div class="table" style="min-width:800px;">

                <div class="thead">
                    <div class="tr">
                        <div class="th" style="width:40px;">
                            <input type="checkbox" id="select-all">
                        </div>
                        <div class="th">–ü–ê–¶–ò–ï–ù–¢</div>
                        <div class="th">–ö–õ–ò–ù–ò–ö–ê</div>
                        <div class="th">–ù–ê–ó–ù–ê–ß–ï–ù–û</div>
                    </div>
                </div>

                <div class="tbody">
                    <div th:each="work : ${works}"
                         th:class="${work.status.name == 'COMPLETED'} ? 'tr-closed' : (${work.status.name == 'PAID'} ? 'tr-paid' : 'tr')">

                        <div class="td" style="width:40px;">
                            <input type="checkbox" name="ids" th:value="${work.id}" class="row-check">
                        </div>

                        <div class="td" th:text="${work.patient}">–ü–∞—Ü–∏–µ–Ω—Ç</div>
                        <div class="td" th:text="${work.clinic}">–ö–ª–∏–Ω–∏–∫–∞</div>

                        <div class="td" th:text="${#temporals.format(work.completeAt, 'dd-MM-yyyy')}">01-01-2025</div>
                    </div>
                </div>

            </div>
        </div>

        <br><br>

        <label><b>–°—Ç–∞—Ç—É—Å:</b></label>
        <select name="status" required>
            <option value="MAKING">–î–ï–õ–ê–ï–¢–°–Ø</option>
            <option value="COMPLETED">–í–´–ü–û–õ–ù–ï–ù–û</option>
            <option value="PAID">–û–ü–õ–ê–ß–ï–ù–û</option>
        </select>

        <br><br>

        <button type="submit" class="medium-button">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
    </form>

</section>

<script>
    // –≤—ã–±—Ä–∞—Ç—å –≤—Å—ë
    document.getElementById('select-all')
        .addEventListener('change', function() {
            const checked = this.checked;
            document.querySelectorAll('.row-check').forEach(c => c.checked = checked);
        });
</script>

</body>
</html>
